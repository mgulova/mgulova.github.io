/*!

Name: Instagram Lite
Dependencies: jQuery
Author: Michael Lynch
Author URL: http://michaelynch.com
Date Created: January 14, 2014
Licensed under the MIT license

*/
!function(t){t.fn.instagramLite=function(e){if(!this.length)return this;plugin=this,plugin.defaults={username:null,clientID:null,limit:null,list:!0,videos:!1,urls:!1,captions:!1,date:!1,likes:!1,max_id:null,load_more:null,error:function(){},success:function(){}};var a=t.extend({},plugin.defaults,e),i=t(this),s=function(t){return t[t.length-1].id},l=function(t){for(var e=t.split(" "),a="",i=0;i<e.length;i++){var s;if("@"==e[i][0]){var l='<a href="http://twitter.com/'+e[i].replace("@","").toLowerCase()+'" target="_blank">'+e[i]+"</a>";s=l}else if("#"==e[i][0]){var l='<a href="http://twitter.com/hashtag/'+e[i].replace("#","").toLowerCase()+'" target="_blank">'+e[i]+"</a>";s=l}else s=e[i];a+=s+" "}return a},r=function(){a.clientID&&a.username?i.each(function(){var e=t(this);t.ajax({type:"GET",url:"https://api.instagram.com/v1/users/search?q="+a.username+"&client_id="+a.clientID+"&callback=?",dataType:"jsonp",success:function(i){if(i.data.length){var r=i.data[0],o="https://api.instagram.com/v1/users/"+r.id+"/media/recent/?client_id="+a.clientID+"&count="+a.limit+"&callback=?";o+=a.max_id?"&max_id="+a.max_id:"",t.ajax({type:"GET",url:o,dataType:"jsonp",success:function(t){if(200===t.meta.code&&t.data.length){for(var i=0;i<t.data.length;i++){var r,o=t.data[i];if("image"===o.type||!a.videos){if(r='<img class="il-photo__img" src="'+o.images.standard_resolution.url+'" alt="Instagram Image" data-filter="'+o.filter+'" />',a.urls&&(r='<a href="'+o.link+'" target="_blank">'+r+"</a>"),(a.captions||a.date||a.likes)&&(r+='<div class="il-photo__meta">'),a.captions&&o.caption&&(r+='<div class="il-photo__caption" data-caption-id="'+o.caption.id+'">'+l(o.caption.text)+"</div>"),a.date){{var n=new Date(1e3*o.created_time),d=n.getDate(),c=n.getMonth()+1,u=n.getFullYear();n.getHours(),n.getMinutes(),n.getSeconds()}n=c+"/"+d+"/"+u,r+='<div class="il-photo__date">'+n+"</div>"}a.likes&&(r+='<div class="il-photo__likes">'+o.likes.count+"</div>"),(a.captions||a.date||a.likes)&&(r+="</div>")}if("video"===o.type&&a.videos&&o.videos){var p;o.videos.standard_resolution?p=o.videos.standard_resolution.url:o.videos.low_resolution?p=o.videos.low_resolution.url:o.videos.low_bandwidth&&(p=o.videos.low_bandwidth.url),r='<video poster="'+o.images.standard_resolution.url+'" controls>',r+='<source src="'+p+'" type="video/mp4;"></source>',r+="</video>"}a.list&&r&&(r='<li class="il-item" data-instagram-id="'+o.id+'">'+r+"</li>"),""!==r&&e.append(r)}a.max_id=s(t.data),a.success.call(this)}else a.error.call(this,t.meta.code,t.meta.error_message)},error:function(){a.error.call(this)}})}else a.error.call(this)},error:function(){a.error.call(this)}})}):a.error.call(this)};a.load_more&&t(a.load_more).on("click",function(t){t.preventDefault(),r()}),r()}}(jQuery);